@Test
void testSearchEmployerDetails_5xxError() {
    EmployerServiceRequestDTO requestDTO = new EmployerServiceRequestDTO();
    requestDTO.setId("123");

    // Mock the WebClient chain
    when(employerAssociationWebClient.post()).thenReturn(requestBodyUriSpec);
    when(requestBodyUriSpec.uri(anyString())).thenReturn(requestBodySpec);
    when(requestBodySpec.body(any())).thenReturn(requestHeadersSpec);
    when(requestHeadersSpec.retrieve()).thenReturn(responseSpec);

    // Mock the onStatus method to simulate a 5xx error
    when(responseSpec.onStatus(any(), any())).thenAnswer(invocation -> {
        // Simulate a 5xx error by throwing a ServiceException
        return Mono.error(new ServiceException(List.of(
                new ErrorItem("500", "ERR", "Internal Server Error")
        )));
    });

    // Call the method under test
    Mono<EmployerServiceResponseDTO> result = client.searchEmployerDetails(requestDTO);

    // Verify the error
    StepVerifier.create(result)
            .expectErrorMatches(throwable -> throwable instanceof ServiceException)
            .verify();
}
